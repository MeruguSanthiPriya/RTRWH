<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Join the sustainable water management revolution. Sign up to assess rainwater harvesting potential at your location.">
  <title>Join Us - Rooftop Rainwater Harvesting</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    /* Enhanced animations */
    @keyframes slideInFromLeft {
      from {
        opacity: 0;
        transform: translateX(-30px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }
    
    @keyframes slideInFromRight {
      from {
        opacity: 0;
        transform: translateX(30px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }
    
    @keyframes fadeInScale {
      from {
        opacity: 0;
        transform: scale(0.95);
      }
      to {
        opacity: 1;
        transform: scale(1);
      }
    }
    
    @keyframes ripple {
      0% {
        transform: scale(0);
        opacity: 0.6;
      }
      100% {
        transform: scale(4);
        opacity: 0;
      }
    }
    
    .animate-slideInLeft {
      animation: slideInFromLeft 0.6s ease-out forwards;
    }
    
    .animate-slideInRight {
      animation: slideInFromRight 0.6s ease-out forwards;
    }
    
    .animate-fadeInScale {
      animation: fadeInScale 0.5s ease-out forwards;
    }
    
    /* Enhanced gradient background */
    body {
      background: linear-gradient(135deg, #0f172a 0%, #1e293b 25%, #334155 50%, #475569 75%, #64748b 100%);
      min-height: 100vh;
      position: relative;
      overflow-x: hidden;
    }
    
    /* Animated background particles */
    .bg-particles {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 1;
    }
    
    .particle {
      position: absolute;
      background: rgba(34, 211, 238, 0.1);
      border-radius: 50%;
      animation: float 6s ease-in-out infinite;
    }
    
    @keyframes float {
      0%, 100% { transform: translateY(0px) rotate(0deg); }
      33% { transform: translateY(-20px) rotate(120deg); }
      66% { transform: translateY(-10px) rotate(240deg); }
    }
    
    /* Glass morphism effects */
    .glass-card {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      box-shadow: 0 25px 45px rgba(0, 0, 0, 0.1);
    }
    
    .glass-button {
      background: rgba(34, 211, 238, 0.2);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(34, 211, 238, 0.3);
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }
    
    .glass-button:hover {
      background: rgba(34, 211, 238, 0.3);
      transform: translateY(-2px);
      box-shadow: 0 10px 25px rgba(34, 211, 238, 0.2);
    }
    
    .glass-button:active {
      transform: translateY(0);
    }
    
    /* Ripple effect */
    .ripple {
      position: absolute;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.3);
      transform: scale(0);
      animation: ripple 0.6s linear;
    }
    
    /* Input styling */
    .glass-input {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      color: white;
      transition: all 0.3s ease;
    }
    
    .glass-input:focus {
      background: rgba(255, 255, 255, 0.15);
      border-color: rgba(34, 211, 238, 0.5);
      outline: none;
      box-shadow: 0 0 20px rgba(34, 211, 238, 0.1);
    }
    
    .glass-input::placeholder {
      color: rgba(255, 255, 255, 0.6);
    }
    
    /* Language selector */
    .language-selector {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      color: white;
      transition: all 0.2s ease;
    }
    
    .language-selector option {
      color: black;
    }
    
    .language-selector:focus {
      outline: none;
      border-color: rgba(34, 211, 238, 0.5);
      box-shadow: 0 0 10px rgba(34, 211, 238, 0.1);
    }
    
    /* Social button styling */
    .social-btn {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }
    
    .social-btn:hover {
      background: rgba(255, 255, 255, 0.2);
      transform: translateY(-1px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }
    
    /* Progress indicator */
    .progress-indicator {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border-radius: 50px;
    }
    
    .progress-step {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.3);
      transition: all 0.3s ease;
    }
    
    .progress-step.active {
      background: #22d3ee;
      box-shadow: 0 0 15px rgba(34, 211, 238, 0.5);
    }
    
    /* Awareness screen styling */
    .awareness-card {
      background: linear-gradient(135deg, rgba(34, 211, 238, 0.1), rgba(6, 182, 212, 0.1));
      backdrop-filter: blur(20px);
      border: 1px solid rgba(34, 211, 238, 0.2);
    }
    
    .stat-card {
      background: rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(15px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      transition: transform 0.3s ease;
    }
    
    .stat-card:hover {
      transform: translateY(-5px);
    }
    
    /* Hide sections initially */
    .section {
      display: none;
    }
    
    .section.active {
      display: block;
    }
    
    /* Text colors */
    .text-primary { color: #22d3ee; }
    .text-secondary { color: rgba(255, 255, 255, 0.8); }
    .text-muted { color: rgba(255, 255, 255, 0.6); }
  </style>
</head>
<body>
  <!-- Background particles -->
  <div class="bg-particles" id="particles"></div>
  
  <!-- Header -->
  <header class="relative z-10 container mx-auto px-4 py-6 flex justify-between items-center">
    <img src="{{ url_for('static', filename='img.png') }}" alt="Rooftop Rainwater Harvesting Logo" class="h-16 w-16 rounded-full object-cover transition-transform duration-300 hover:scale-105">
    
    <div class="flex items-center space-x-4">
      <!-- Progress indicator -->
      
      <!-- Language selector -->
      <select class="language-selector rounded-lg px-3 py-2 text-sm" id="languageSelect">
        <option value="en">English</option>
        <option value="hi">हिंदी</option>
        <option value="ta">தமிழ்</option>
        <option value="te">తెలుగు</option>
        <option value="bn">বাংলা</option>
        <option value="gu">ગુજરાતી</option>
        <option value="kn">ಕನ್ನಡ</option>
        <option value="ml">മലയാളം</option>
      </select>
    </div>
  </header>

  <!-- Main Content -->
  <main class="relative z-10 container mx-auto px-4 py-8 max-w-4xl">
    <div class="text-center mb-12 animate-fadeInScale">
        <h1 class="text-5xl md:text-6xl font-extrabold text-white tracking-tighter" style="text-shadow: 0 2px 4px rgba(0,0,0,0.5);" data-translate-key="main-title">
            <span class="text-primary">HYDRO</span> HARVEST
        </h1>
        <p class="mt-4 text-lg text-secondary" style="text-shadow: 0 1px 3px rgba(0,0,0,0.4);" data-translate-key="subtitle">
            Your Solution for Sustainable Water Management
        </p>
    </div>
    
    <!-- Login/Signup Section -->
    <section id="loginSection" class="section active">
      <div class="grid lg:grid-cols-2 gap-12 items-center">
        
        <!-- Welcome Content -->
        <div class="animate-slideInLeft text-center lg:text-left">
          <h1 class="text-4xl lg:text-5xl font-bold text-white mb-6 leading-tight" data-translate-key="join-revolution">
            Join the Water
            <span class="text-primary">Revolution</span>
          </h1>
          <p class="text-secondary text-lg mb-8 leading-relaxed" data-translate-key="discover-potential">
            Discover the potential of rainwater harvesting at your location. Start your journey towards sustainable water management and contribute to groundwater conservation.
          </p>
          
          <!-- Quick stats -->
          <div class="grid grid-cols-2 gap-4 mb-8">
            <div class="stat-card rounded-xl p-4">
              <div class="text-2xl font-bold text-primary">500M+</div>
              <div class="text-sm text-muted" data-translate-key="liters-saved">Liters Saved</div>
            </div>
            <div class="stat-card rounded-xl p-4">
              <div class="text-2xl font-bold text-primary">10K+</div>
              <div class="text-sm text-muted" data-translate-key="happy-users">Happy Users</div>
            </div>
          </div>
        </div>
        
        <!-- Auth Form -->
        <div class="animate-slideInRight">
          <div class="glass-card rounded-2xl p-8 max-w-md mx-auto">
            <h2 class="text-2xl font-bold text-white mb-6 text-center" data-translate-key="get-started">Get Started</h2>
            
            <div class="space-y-4">
              <div>
                <h3 class="text-lg font-semibold text-white mb-4 text-center" data-translate-key="user-login">User Login</h3>
                <div class="space-y-3">
                  <button class="social-btn w-full py-3 px-4 rounded-xl flex items-center justify-center space-x-3 text-white font-medium" onclick="handleGoogleLogin()">
                    <i class="fab fa-google text-lg"></i>
                    <span data-translate-key="continue-google">Continue with Google</span>
                  </button>
                  
                  <button class="social-btn w-full py-3 px-4 rounded-xl flex items-center justify-center space-x-3 text-white font-medium" onclick="showMobileLogin()">
                    <i class="fas fa-mobile-alt text-lg"></i>
                    <span data-translate-key="continue-mobile">Continue with Mobile</span>
                  </button>
                </div>
              </div>
            </div>

            <!-- Divider -->
            <div class="flex items-center my-6">
              <div class="flex-grow border-t border-gray-600"></div>
              <span class="px-3 text-gray-400 text-sm">OR</span>
              <div class="flex-grow border-t border-gray-600"></div>
            </div>

            <!-- Admin Login Button -->
            <div>
              <h3 class="text-lg font-semibold text-white mb-4 text-center" data-translate-key="admin-login">Admin Login</h3>
              <a href="{{ url_for('admin_login') }}" class="glass-button w-full py-3 px-4 rounded-xl text-white font-medium flex items-center justify-center space-x-3">
                <i class="fas fa-user-shield text-lg"></i>
                <span data-translate-key="admin-login-btn">Admin Login</span>
              </a>
            </div>
            
            <!-- Mobile Login Form (Initially Hidden) -->
            <div id="mobileLoginForm" class="hidden mt-6 space-y-4">
              <div class="relative">
                <i class="fas fa-phone absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                <input type="tel" placeholder="Enter mobile number" class="glass-input w-full pl-10 pr-4 py-3 rounded-xl" id="mobileNumber" data-translate-key="enter-mobile">
              </div>
              <button class="glass-button w-full py-3 px-4 rounded-xl text-white font-medium" onclick="sendOTP()" data-translate-key="send-otp">
                Send OTP
              </button>
            </div>
            
            <!-- OTP Verification (Initially Hidden) -->
            <div id="otpVerification" class="hidden mt-6 space-y-4">
              <div class="text-center text-sm text-muted mb-4" data-translate-key="otp-sent-to">
                Enter the 6-digit code sent to <span id="sentNumber" class="text-primary"></span>
              </div>
              <div class="flex space-x-2 justify-center">
                <input type="text" maxlength="1" class="glass-input w-12 h-12 text-center rounded-lg text-lg" oninput="moveToNext(this, 0)">
                <input type="text" maxlength="1" class="glass-input w-12 h-12 text-center rounded-lg text-lg" oninput="moveToNext(this, 1)">
                <input type="text" maxlength="1" class="glass-input w-12 h-12 text-center rounded-lg text-lg" oninput="moveToNext(this, 2)">
                <input type="text" maxlength="1" class="glass-input w-12 h-12 text-center rounded-lg text-lg" oninput="moveToNext(this, 3)">
                <input type="text" maxlength="1" class="glass-input w-12 h-12 text-center rounded-lg text-lg" oninput="moveToNext(this, 4)">
                <input type="text" maxlength="1" class="glass-input w-12 h-12 text-center rounded-lg text-lg" oninput="moveToNext(this, 5)">
              </div>
              <button class="glass-button w-full py-3 px-4 rounded-xl text-white font-medium" onclick="verifyOTP()" data-translate-key="verify-continue">
                Verify & Continue
              </button>
              <div class="text-center">
                <button class="text-primary text-sm hover:underline" onclick="sendOTP()" data-translate-key="resend-otp">Resend OTP</button>
              </div>
            </div>
            
            <div class="mt-6 text-center text-xs text-muted" data-translate-key="terms-agree">
              By continuing, you agree to our 
              <a href="#" class="text-primary hover:underline">Terms of Service</a> and 
              <a href="#" class="text-primary hover:underline">Privacy Policy</a>
            </div>
          </div>
        </div>
      </div>
    </section>
    
    <!-- Consent & Awareness Section -->
    <section id="awarenessSection" class="section">
      <div class="awareness-card rounded-2xl p-8 lg:p-12 text-center animate-fadeInScale">
        <div class="mb-8">
          <i class="fas fa-tint text-6xl text-primary mb-4"></i>
          <h2 class="text-3xl lg:text-4xl font-bold text-white mb-4" data-translate-key="conservation-starts">
            Water Conservation Starts with
            <span class="text-primary">You</span>
          </h2>
          <p class="text-secondary text-lg max-w-3xl mx-auto leading-relaxed" data-translate-key="every-drop-counts">
            Every drop counts in our mission to preserve water for future generations. Learn how rainwater harvesting can transform your property into a water-positive asset.
          </p>
        </div>
        
        <!-- Key Benefits -->
        <div class="grid md:grid-cols-3 gap-6 mb-12">
          <div class="stat-card rounded-xl p-6 text-center">
            <i class="fas fa-seedling text-3xl text-primary mb-3"></i>
            <h3 class="text-lg font-semibold text-white mb-2" data-translate-key="env-impact">Environmental Impact</h3>
            <p class="text-muted text-sm" data-translate-key="env-impact-desc">Reduce groundwater depletion and support ecosystem sustainability</p>
          </div>
          
          <div class="stat-card rounded-xl p-6 text-center">
            <i class="fas fa-rupee-sign text-3xl text-primary mb-3"></i>
            <h3 class="text-lg font-semibold text-white mb-2" data-translate-key="cost-savings">Cost Savings</h3>
            <p class="text-muted text-sm" data-translate-key="cost-savings-desc">Significant reduction in water bills and long-term financial benefits</p>
          </div>
          
          <div class="stat-card rounded-xl p-6 text-center">
            <i class="fas fa-home text-3xl text-primary mb-3"></i>
            <h3 class="text-lg font-semibold text-white mb-2" data-translate-key="prop-value">Property Value</h3>
            <p class="text-muted text-sm" data-translate-key="prop-value-desc">Increase your property value with sustainable infrastructure</p>
          </div>
        </div>
        
        <!-- Important Facts -->
        <div class="glass-card rounded-xl p-6 mb-8 text-left">
          <h3 class="text-xl font-semibold text-white mb-4 flex items-center" data-translate-key="did-you-know">
            <i class="fas fa-info-circle text-primary mr-3"></i>
            Did You Know?
          </h3>
          <div class="grid md:grid-cols-2 gap-4 text-secondary">
            <div class="flex items-start space-x-3">
              <i class="fas fa-check-circle text-primary mt-1"></i>
              <span class="text-sm" data-translate-key="fact1">A 1000 sq ft roof can collect ~600 liters per inch of rainfall</span>
            </div>
            <div class="flex items-start space-x-3">
              <i class="fas fa-check-circle text-primary mt-1"></i>
              <span class="text-sm" data-translate-key="fact2">Rainwater harvesting can recharge groundwater by 40-60%</span>
            </div>
            <div class="flex items-start space-x-3">
              <i class="fas fa-check-circle text-primary mt-1"></i>
              <span class="text-sm" data-translate-key="fact3">ROI typically achieved within 3-5 years of installation</span>
            </div>
            <div class="flex items-start space-x-3">
              <i class="fas fa-check-circle text-primary mt-1"></i>
              <span class="text-sm" data-translate-key="fact4">Reduces flood risk and urban heat island effect</span>
            </div>
          </div>
        </div>
        
        <!-- Consent Checkboxes -->
        <div class="glass-card rounded-xl p-6 mb-8 text-left">
          <h3 class="text-lg font-semibold text-white mb-4" data-translate-key="your-consent">Your Consent</h3>
          <div class="space-y-3">
            <label class="flex items-start space-x-3 cursor-pointer">
              <input type="checkbox" class="mt-1 rounded border-gray-600" id="dataConsent" required>
              <span class="text-sm text-secondary" data-translate-key="consent-data">I consent to the collection and processing of my location data to provide personalized rainwater harvesting assessments</span>
            </label>
            <label class="flex items-start space-x-3 cursor-pointer">
              <input type="checkbox" class="mt-1 rounded border-gray-600" id="communicationConsent">
              <span class="text-sm text-secondary" data-translate-key="consent-communication">I agree to receive updates and recommendations about water conservation initiatives (optional)</span>
            </label>
            <label class="flex items-start space-x-3 cursor-pointer">
              <input type="checkbox" class="mt-1 rounded border-gray-600" id="termsConsent" required>
              <span class="text-sm text-secondary" data-translate-key="consent-terms">I have read and agree to the <a href="#" class="text-primary hover:underline">Terms of Service</a> and <a href="#" class="text-primary hover:underline">Privacy Policy</a></span>
            </label>
          </div>
        </div>
        
        <!-- Action Buttons -->
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
          <a href="{{ url_for('location_input_page') }}" id="proceedBtn" class="glass-button px-8 py-3 rounded-xl text-white font-medium flex items-center justify-center space-x-2 opacity-50 pointer-events-none">
            <span data-translate-key="start-assessment">Start My Assessment</span>
            <i class="fas fa-arrow-right"></i>
          </a>
          <button class="social-btn px-8 py-3 rounded-xl text-white font-medium" onclick="goBack()" data-translate-key="go-back">
            <i class="fas fa-arrow-left mr-2"></i>
            Go Back
          </button>
        </div>
      </div>
    </section>
  </main>
  
  <!-- Footer -->
  <footer class="relative z-10 container mx-auto px-4 py-6 text-center">
    <p class="text-muted text-sm" data-translate-key="footer-text">Supporting sustainable water management across India</p>
  </footer>

  <!-- Inline fallback for JS logic if external file is missing or for quick updates -->
  <script>
    // Create background particles
    function createParticles() {
      const particlesContainer = document.getElementById('particles');
      if (!particlesContainer) return;
      for (let i = 0; i < 20; i++) {
        const particle = document.createElement('div');
        particle.classList.add('particle');
        particle.style.left = Math.random() * 100 + '%';
        particle.style.top = Math.random() * 100 + '%';
        particle.style.width = Math.random() * 4 + 2 + 'px';
        particle.style.height = particle.style.width;
        particle.style.animationDuration = Math.random() * 3 + 3 + 's';
        particle.style.animationDelay = Math.random() * 2 + 's';
        particlesContainer.appendChild(particle);
      }
    }

    // Add ripple effect to buttons
    function addRippleEffect() {
      document.querySelectorAll('.glass-button, .social-btn').forEach(button => {
        button.addEventListener('click', function(e) {
          const ripple = document.createElement('span');
          const rect = this.getBoundingClientRect();
          const size = Math.max(rect.width, rect.height);
          const x = e.clientX - rect.left - size / 2;
          const y = e.clientY - rect.top - size / 2;
          ripple.className = 'ripple';
          ripple.style.width = ripple.style.height = size + 'px';
          ripple.style.left = x + 'px';
          ripple.style.top = y + 'px';
          this.appendChild(ripple);
          setTimeout(() => ripple.remove(), 600);
        });
      });
    }

    // Authentication functions
    function handleGoogleLogin() {
      console.log('Google login initiated');
      setTimeout(() => { showAwarenessSection(); }, 1000);
    }
    function showMobileLogin() {
      document.getElementById('mobileLoginForm')?.classList.remove('hidden');
    }
    function sendOTP() {
      const mobileNumberInput = document.getElementById('mobileNumber');
      if (!mobileNumberInput) return;
      const mobileNumber = mobileNumberInput.value;
      if (mobileNumber.length >= 10) {
        const sentNumberEl = document.getElementById('sentNumber');
        if (sentNumberEl) sentNumberEl.textContent = mobileNumber;
        document.getElementById('mobileLoginForm')?.classList.add('hidden');
        document.getElementById('otpVerification')?.classList.remove('hidden');
      } else {
        alert('Please enter a valid mobile number');
      }
    }
    function moveToNext(current, index) {
      if (current.value.length >= 1 && index < 5) {
        current.nextElementSibling?.focus();
      }
    }
    function verifyOTP() {
      const otpInputs = document.querySelectorAll('#otpVerification input[type="text"]');
      const otp = Array.from(otpInputs).map(input => input.value).join('');
      if (otp.length === 6) {
        console.log('OTP verified:', otp);
        showAwarenessSection();
      } else {
        alert('Please enter complete OTP');
      }
    }
    function proceedAsGuest() {
      console.log('Proceeding as guest');
      showAwarenessSection();
    }
    function showAwarenessSection() {
      document.getElementById('loginSection')?.classList.remove('active');
      document.getElementById('awarenessSection')?.classList.add('active');
      document.getElementById('step2')?.classList.add('active');
    }
    function goBack() {
      document.getElementById('awarenessSection')?.classList.remove('active');
      document.getElementById('loginSection')?.classList.add('active');
      document.getElementById('step2')?.classList.remove('active');
    }
    // Consent validation
    function validateConsent() {
      const dataConsent = document.getElementById('dataConsent');
      const termsConsent = document.getElementById('termsConsent');
      const proceedBtn = document.getElementById('proceedBtn');
      if (!dataConsent || !termsConsent || !proceedBtn) return;
      if (dataConsent.checked && termsConsent.checked) {
        proceedBtn.classList.remove('opacity-50', 'pointer-events-none');
      } else {
        proceedBtn.classList.add('opacity-50', 'pointer-events-none');
      }
    }
    document.addEventListener('DOMContentLoaded', function() {
      createParticles();
      addRippleEffect();
      document.getElementById('dataConsent')?.addEventListener('change', validateConsent);
      document.getElementById('termsConsent')?.addEventListener('change', validateConsent);
      validateConsent();
    });
  </script>
</body>
</html>